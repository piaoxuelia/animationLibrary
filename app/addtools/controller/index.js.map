{
    "version": 3,
    "sources": [
        "../../../src/addtools/controller/index.js"
    ],
    "names": [],
    "mappings": "AAAA;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;;;;;;;;;;;;;;kBAOC,W,0BAAc;;AAEb,SAAO,KAAK,OAAL,EAAP;AACA,E;;kBACK,a;;OACD,K,EAEC,M;;;;;AAFD,Y,GAAQ,KAAK,KAAL,CAAW,MAAX,C;;;cAEQ,MAAM,MAAN,E;;;AAAf,a;;AACJ,YAAK,OAAL,CAAa,EAAE,UAAU,MAAZ,EAAb;;;;;;;;AAEA,YAAK,IAAL,CAAU,GAAV,EAAe,KAAf;;;;;;;;;;;;;;;;;kBAII,W;;OACD,S,EACA,S,EAEA,Q,EACA,G,EACA,O,EACA,M,EACA,K,EAGC,G,EACA,I,EAEC,Q;;;;;AAbF,gB,GAAY,KAAK,KAAL,CAAW,UAAX,C;AACZ,gB,GAAY,KAAK,KAAL,CAAW,MAAX,C;AAEZ,e,GAAW,KAAK,GAAL,CAAS,UAAT,C;AACX,U,GAAM,KAAK,GAAL,CAAS,KAAT,C;AACN,c,GAAU,KAAK,GAAL,CAAS,SAAT,C;AACV,a,GAAS,KAAK,GAAL,CAAS,QAAT,C;AACT,Y,GAAQ,KAAK,GAAL,CAAS,OAAT,C;;;;;cAGK,UAAU,KAAV,CAAgB,EAAC,KAAI,GAAL,EAAhB,EAA2B,KAA3B,E;;;AAAZ,U;;cACa,UAAU,KAAV,CAAgB,EAAC,KAAI,GAAL,EAAhB,EAA2B,KAA3B,E;;;AAAb,W;;aACD,CAAC,GAAD,IAAM,CAAC,I;;;;;;cACY,UAAU,GAAV,CAAc;AACjC,kBAAU,QADuB;AAEjC,gBAAO,MAF0B;AAGjC,aAAK,GAH4B;AAIjC,iBAAQ,OAJyB;AAKjC,eAAM;AAL2B,QAAd,C;;;AAAjB,e;;AAOJ,YAAK,OAAL,CAAa,EAAE,UAAS,QAAX,EAAb;;;;;AAEA,YAAK,IAAL,CAAU,GAAV,EAAe,OAAf;;;;;;;;;;AAKD,YAAK,IAAL,CAAU,GAAV,EAAe,KAAf",
    "file": "../../../src/addtools/controller/index.js",
    "sourcesContent": [
        "'use strict';\n\nimport Base from './base.js';\n\nexport default class extends Base {\n\t/**\n\t * index action\n\t * @return {Promise} []\n\t */\n\tindexAction() {\n\t\t//auto render template file index_index.html\n\t\treturn this.display();\n\t}\n\tasync getcateAction() {\n\t\tlet model = this.model(\"CATE\");\n\t\ttry {\n\t\t\tlet result = await model.select();\n\t\t\tthis.success({ \"result\": result });\n\t\t} catch (e) {\n\t\t\tthis.fail(102, \"未成功\");\n\t\t}\n\n\t}\n\tasync storeAction() {\n\t\tlet modelTemp = this.model(\"TEMPLIST\");\n\t\tlet modelList = this.model(\"LIST\");\n\t\t\n\t\tvar toolName = this.get('toolName');\n\t\tvar url = this.get('url');\n\t\tvar profile = this.get('profile');\n\t\tvar cateId = this.get('cateId');\n\t\tvar email = this.get('email');\n\t\t//将得到的数据参数存储到临时的表TEMPLIST中，在此表中等待审核\n\t\ttry {\n\t\t\tlet num = await modelList.where({url:url}).count();\n\t\t\tlet num1 = await modelTemp.where({url:url}).count();\n\t\t\tif(!num&&!num1){\n\t\t\t\tlet insertId = await modelTemp.add({\n\t\t\t\t\t\ttoolName: toolName,\n\t\t\t\t\t\tcateId:cateId ,\n\t\t\t\t\t\turl: url, \n\t\t\t\t\t\tprofile:profile ,\n\t\t\t\t\t\temail:email\n\t\t\t\t\t});\n\t\t\t\tthis.success({ \"result\":insertId});\n\t\t\t}else{\n\t\t\t\tthis.fail(102, \"记录已存在\");\n\t\t\t}\n\t\t\t\n\n\t\t} catch (e) {\n\t\t\tthis.fail(102, \"未成功\");\n\t\t}\n\t}\n}"
    ]
}